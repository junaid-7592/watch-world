
<%-include ("../../views/partials/user/header") %>


<style>
	.shop-layout .sort-dropdown {
    margin-top: 10px;
    display: flex;
    align-items: center;
    gap: 5px;
}

.shop-layout .sort-dropdown label {
    font-size: 14px;
    font-weight: bold;
    color: #333;
}

.shop-layout .sort-dropdown select {
    padding: 8px 12px;
    font-size: 14px;
    border: 1px solid #ccc;
    border-radius: 5px;
    background-color: #fff;
    cursor: pointer;
}

/* Ensure it only affects the dropdown in .shop-layout */
.shop-layout .sort-dropdown select:focus {
    outline: none;
    border-color: #007bff;
}

</style>
							
					
	
								<!-- Start Mobile Menu -->
								<div class="mobile-menu d-block d-lg-none">
									<nav>
										<ul>     
											<li class=""><a href="/">Home</a>
												
											</li>
											<li><a href="shop.html">Laptop</a>
												<ul class="">
													<li><a href="#">Dreeses</a>
														<ul>
															<li><a href="#">Cocktail</a></li>
															<li><a href="#">Day</a></li>
															<li><a href="#">Evening</a></li>
															<li><a href="#">Sports</a></li>
														</ul>
													</li>
													<li><a href="#">Shoes</a>
														<ul>											
															<li><a href="#">Sports</a></li>
															<li><a href="#">Run</a></li>
															<li><a href="#">Sandals</a></li>
															<li><a href="#">Books</a></li>
														</ul>
													</li>
													<li><a href="#">Handbages</a>
														<ul>
															<li><a href="#">blazers</a></li>
															<li><a href="#">table</a></li>
															<li><a href="#">coats</a></li>
															<li><a href="#">Sports</a></li>
															<li><a href="#">kids</a></li>
														</ul>
													</li>
													<li><a href="#">Clothing</a>
														<ul>
															<li><a href="#">T-shits</a></li>
															<li><a href="#">Coats</a></li>
															<li><a href="#">Jacketes</a></li>
															<li><a href="#">Jeans</a></li>
														</ul>
													</li>
												</ul>
											</li>
											<li class=""><a href="shop.html">Mobile</a>
												<ul class="">
													<li><a href="#">Bages</a>
														<ul>
															<li><a href="#">Bootes Bages</a></li>
															<li><a href="#">Blazers</a></li>
															<li><a href="#">Mermaid</a></li>
														</ul>
													</li>
													<li><a href="#">Clothing</a>
														<ul>
															<li><a href="#">coats</a></li>
															<li><a href="#">T-shirt</a></li>
														</ul>
													</li>
													<li><a href="#">lingerie</a>
														<ul>
															<li><a href="#">brands</a></li>
															<li><a href="#">furniture</a></li>
														</ul>
													</li>
												</ul>
											</li>
											<li><a href="shop.html">Tablet</a>
												<ul class="">
													<li><a href="#">Footwear Man</a>
														<ul>
															<li><a href="#">Gold Rigng</a></li>
															<li><a href="#">paltinum Rings</a></li>
															<li><a href="#">Silver Ring</a></li>
															<li><a href="#">Tungsten Ring</a></li>
														</ul>	
													</li>
													<li><a href="#">Footwear Womens</a>
														<ul>
															<li><a href="#">Brand Gold</a></li>
															<li><a href="#">paltinum Rings</a></li>
															<li><a href="#">Silver Ring</a></li>
															<li><a href="#">Tungsten Ring</a></li>
														</ul>	
													</li>
													<li><a href="#">Band</a>
														<ul>
															<li><a href="#">Platinum Necklaces</a></li>
															<li><a href="#">Gold Ring</a></li>
															<li><a href="#">silver ring</a></li>
															<li><a href="#">sunglasses</a></li>
														</ul>	
													</li>	
												</ul>
											</li>														
											<li><a href="shop.html">Headphone</a>
												<ul class="">
													<li><a href="#">Rings</a>
														<ul>
															<li><a href="#">Coats & jackets</a></li>
															<li><a href="#">blazers</a></li>
															<li><a href="#">raincoats</a></li>
														</ul>	
													</li>
													<li><a href="#">Dresses</a>
														<ul>
															<li><a href="#">footwear</a></li>
															<li><a href="#">blazers</a></li>
															<li><a href="#">clog sandals</a></li>
															<li><a href="#">combat boots</a></li>
														</ul>	
													</li>
													<li><a href="#">Accessories</a>
														<ul>
															<li><a href="#">bootees Bags</a></li>
															<li><a href="#">blazers</a></li>
															<li><a href="#">jackets</a></li>
															<li><a href="#">kids</a></li>
															<li><a href="#">shoes</a></li>
														</ul>	
													</li>
													<li><a href="#">Top</a>
														<ul>
															<li><a href="#">briefs</a></li>
															<li><a href="#">camis</a></li>
															<li><a href="#">nigthwear</a></li>
															<li><a href="#">shapewer</a></li>
														</ul>	
													</li>
												</ul>
											</li>
											<li><a href="shop.html">Camera & Photo</a></li>
											<li><a href="shop.html">Desktop</a></li>
											<!-- <li><a href="shop.html">Shop All</a></li> -->
											<li class=""><a href="#">Pages</a>
												<ul class="">
													<li><a href="blog.html">Blog</a></li>
													<li><a href="blog-details.html">Blog Details</a></li>
													<li><a href="cart.html">Cart</a></li>
													<li><a href="checkout.html">Checkout</a></li>
													<li><a href="contact.html">Contact</a></li>
													<!-- <li><a href="shop.html">Shop</a></li> -->
													<li><a href="shop-list.html">Shop List</a></li>
													<li><a href="product-details.html">Product Details</a></li>
													<li><a href="my-account.html">My Account</a></li>
													<li><a href="testmonial.html">Testmonial</a></li>
													<li><a href="wishlist.html">Wishlist</a></li>
												</ul>
											</li>
										</ul>
									</nav>
								</div><!-- End Mobile Menu -->
							</div>
						</div>
					</div>
				</div>
			</div>
		</div><!-- End Main Menu Area -->



		<!-- Breadcurb Area -->
		<div class="breadcurb-area">
			<div class="container">
				<ul class="breadcrumb">
					<li class="home"><a href="/">Home/</a></li>

					<li><a href="/shop">Shop</a></li>
				</ul>
			</div>
		</div>
		<!-- End Breadcurb Area -->


		
		<!-- Shop Product Area -->
		<div class="shop-product-area">
			<div class="container">
				<div class="row">
					<div class="col-lg-3 col-md-12">
						<!-- Left Sidebar-->
						<div class="left-sidebar">
							<div class="left-sidebar-title">
								<!-- <h2>SORT BY</h2> -->
							</div>
							<!-- Shop Layout -->
							
							<!-- Price Filter -->
							<div class="price-filter-area shop-layout">
								<div class="price-filter">
									<div class="layout-title">
										<h2>Price</h2>
									</div>
									<div id="slider-range"></div>
									<p>
									  <input type="text" id="amount" readonly style="border:0; color:#f6931f; font-weight:bold;">
									</p>
									<button class="btn btn-default">Filter</button>
								</div>
							</div><!-- End Price Filter Area -->
							<!-- Shop Layout -->
							 <div>
								<h2>SORT BY</h2>
							 </div>
							

							<select id="sort-by" onchange="applySorting()" style="margin-bottom: 15px; width: 16rem; height: 3rem; font-size: larger;">
								<option value="" disabled selected>Select Item</option>
								<option value="popularity">Popularity</option>
								<option value="low-to-high">Price: Low to High</option>
								<option value="high-to-low">Price: High to Low</option>
								<option value="average-ratings">Average Ratings</option>
								<option value="featured">Featured</option>
								<option value="new-arrivals">New Arrivals</option>
								<option value="a-z">A - Z</option>
								<option value="z-a">Z - A</option>
							</select>
							
						
							<select id="category-select" style="margin-bottom: 15px; width: 16rem; height: 3rem; font-size: larger;">
								<option value="all">All Categories</option>
								<% categoryOptions.forEach(function(category) { %>
									<option value="<%= category.value %>">
										<%= category.name %>
									</option>
								<% }); %>
							</select>
									
							
    

						
							<div class="shop-layout">
								<div class="layout-title">
									<h2>Color</h2>
								</div>
								<div class="layout-list">
									<ul>
										<li><a href="#">Black</a></li>
										<li><a href="#">Blue</a></li>
										<li><a href="#">Brown</a></li>
										<li><a href="#">silver</a></li>
										<li><a href="#">Red</a></li>
										<li><a href="#">White</a></li>
										<li><a href="#">green</a></li>
									</ul>
								</div>
							</div><!-- End Shop Layout -->
							<!-- Shop Layout Banner -->
							<div class="shop-layout-banner single-banner">
								<a href="#">
									<!-- <img alt="banner" src="assets/images/banner/banner1.webp"> -->
								</a>
							</div><!-- End Shop Layout Banner -->
							<!-- Popular Tag Area -->
							<div class="popular-tag-area">
								
							</div><!-- End Popular Tag Area -->
						</div><!-- End Left Sidebar -->
					</div>
					<div class="col-lg-9 col-md-12">
						<!-- Shop Product View -->
						<div class="shop-product-view">
							<!-- Shop Category Image -->
							<div class="shop-category-image">
								<img src="/assets/images/banner/b6.avif" alt="banner">
							</div>
							<!-- Shop Product Tab Area -->
							<div class="product-tab-area">
								<!-- Tab Bar -->
								<div class="tab-bar">
									<div class="tab-bar-inner">
										<ul class="nav nav-tabs" role="tablist">
											<li><a class="active" href="#shop-product" data-bs-toggle="tab"><i class="fa fa-th-large"></i></a></li>
											<li><a href="#shop-list" data-bs-toggle="tab"><i class="fa fa-th-list"></i></a></li>
										</ul>
									</div>
									<div class="toolbar">
										<div class="sorter">
											<div class="sort-by">
												<label>Sort By</label>
												<select>
													<option value="position">Position</option>
													<option value="name">Name</option>
													<option value="price">Price</option>
												</select>
												<a href="#"><i class="fa fa-long-arrow-up"></i></a>
											</div>
										</div>
										<div class="pager-list">
											<div class="limiter">
												<label>Show</label>
												<select>
													<option value="9">12</option>
													<option value="12">15</option>
													<option value="24">18</option>
													<option value="36">36</option>
												</select>
												per page
											</div>
										</div>
									</div>
								</div><!-- End Tab Bar -->
						
								<!-- Tab Content -->
								<div class="tab-content">
									<!-- Shop Product-->
									<div class="tab-pane active" id="shop-product">
										<!-- Tab Single Product-->
										<div class="tab-single-product">
											<!-- Single Product -->
											<div class="products">
												<% product.forEach(prod => { %>
												<div class="singel-product single-product-col">
													<div class="label-pro-new">New</div>
													<!-- Single Product Image -->
													<div class="carousel-inner">
														<% prod.productImage.forEach((image, index) => { %>
														  <div class="carousel-item <%= index === 0 ? 'active' : '' %>">
															<img src="<%= image %>" onclick="window.location.href='/productinfo?id=<%=prod._id%>'" class="d-block w-100" alt="<%= prod.productName %>">
														  </div>
														<% }) %>
													  </div>
													<!-- Single Product Content -->
													<div class="single-product-content">
														<h2 class="product-name">
															<a title="<%= prod.name %>" href="/productinfo?id=<%=prod._id%>"><%= prod.productName %></a>
														</h2>
														<div class="ratings">
															<div class="rating-box">
																<div class="rating">
																	<% for (let i = 0; i < prod.rating; i++) { %>
																		<i class="fa fa-star"></i>
																	<% } %>
																	<% for (let i = prod.rating; i < 5; i++) { %>
																		<i class="fa fa-star-o"></i>
																	<% } %>
																</div>
															</div>
														</div>
														<div class="product-price">
															<p>$<%= prod. salePrice %></p>
														</div>
														<!-- Single Product Actions -->
														<div class="product-actions">


															<!-- <button class="button btn-cart" title="Add to Cart" type="button">
																<i class="fa fa-shopping-cart">&nbsp;</i><span>Add to Cart</span>
															</button> -->



															<button class="button btn-cart" id="addToCart" onclick="addToCart('<%= prod._id %>') ">
																<i class="fa fa-shopping-cart">&nbsp;</i><span>Add to Cart</span>
															</button>




															<div class="add-to-link">
																<ul>
																	<li class="quic-view">
																		 <a href="/productinfo?id=<%=prod._id%>"> 
																			<i class="fa fa-search"></i>Quick view
																		 </a>
																	</li>
																	<li class="wishlist"><a href="#"><i class="fa fa-heart"></i></a></li>
																	<li class="refresh"><a href="#"><i class="fa fa-refresh"></i></a></li>
																</ul>
															</div>
														</div>
													</div>
												</div>
												<% }) %>
											</div>
											
											</div>
										<!-- Tab Single Product-->

										<div class="pagination-container">
											<% if (currentPage > 1) { %>
												<a href="?page=<%= currentPage - 1 %>">&laquo; Previous</a>
											<% } %>
											
											<% for (let i = 1; i <= totalPages; i++) { %>
												<% if (i === currentPage) { %>
													<span class="current-page"><%= i %></span>
												<% } else { %>
													<a href="?page=<%= i %>"><%= i %></a>
												<% } %>
											<% } %>
											
											<% if (currentPage < totalPages) { %>
												<a href="?page=<%= currentPage + 1 %>">Next &raquo;</a>
											<% } %>
										</div>
									
									<!-- Shop List -->
									
    </body>

<!-- Mirrored from htmldemo.net/selphy/selphy/shop.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 26 Dec 2024 10:50:41 GMT -->
</html>
<%-include ("../../views/partials/user/footer") %>
                  
				  <!-- JS
				  ============================================ -->
			  
				  <!-- Modernizer & jQuery JS -->
				  <script src="assets/js/vendor/modernizr-2.8.3.min.js"></script>
				  <script src="assets/js/vendor/jquery-1.12.4.min.js"></script>
			  
				  <!-- Bootstrap JS -->
				  <script src="assets/js/popper.min.js"></script>
				  <script src="assets/js/bootstrap.min.js"></script>
			  
				  <!-- Plugins JS -->
				  <script src="assets/js/jquery.nivo.slider.pack.js"></script>
				  <script src="assets/js/jquery.meanmenu.min.js"></script>
				  <script src="assets/js/jquery-price-slider.js"></script>
				  <script src="assets/js/jquery.simpleGallery.min.js"></script>
				  <script src="assets/js/jquery.simpleLens.min.js"></script>
				  <script src="assets/js/owl.carousel.min.js"></script>
				  <script src="assets/js/jquery.scrollUp.min.js"></script>
				  <script src="assets/js/dbclick.min.js"></script>
				  <script src="assets/js/jquery.countdown.min.js"></script>
				  <script src="assets/js/plugins.js"></script>
			  
				  <!-- Main JS -->
				  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
				  <script src="assets/js/main.js"></script>
<script>
					function applySorting() {
    const sortBy = document.getElementById("sort-by").value;
    console.log("Selected Sorting:", sortBy);

    fetch(`/products?sort=${sortBy}`)
        .then(response => response.json())
        .then(data => {
            console.log("Sorted Products:", data);
            updateProductList(data); // UI update function call cheyyuka
        })
        .catch(error => console.error("Error fetching products:", error));
}


function updateProductList(products) {
    const productContainer = document.querySelector(".products"); // Products container edukkanam
    productContainer.innerHTML = ""; // Old products remove cheyyuka
    
    products.forEach(prod => {
        const productHTML = `
            <div class="singel-product single-product-col">
                <div class="label-pro-new">New</div>
                <div class="carousel-inner">
                    ${prod.productImage.map((image, index) => `
                        <div class="carousel-item ${index === 0 ? 'active' : ''}">
                            <img src="${image}" onclick="window.location.href='/productinfo?id=${prod._id}'" class="d-block w-100" alt="${prod.productName}">
                        </div>
                    `).join('')}
                </div>
                <div class="single-product-content">
                    <h2 class="product-name">
                        <a href="/productinfo?id=${prod._id}">${prod.productName}</a>
                    </h2>
                    <div class="ratings">
                        <div class="rating-box">
                            <div class="rating">
                                ${'<i class="fa fa-star"></i>'.repeat(prod.rating)}
                                ${'<i class="fa fa-star-o"></i>'.repeat(5 - prod.rating)}
                            </div>
                        </div>
                    </div>
                    <div class="product-price">
                        <p>$${prod.salePrice}</p>
                    </div>
                </div>
            </div>
        `;
        productContainer.innerHTML += productHTML;
    });
}
// Frontend JavaScript
function applyCategory() {
    const categorySelect = document.getElementById('category-select');
    const selectedCategory = categorySelect.value;
    
    fetch(`/api/products?category=${selectedCategory}`)
        .then(response => response.json())
        .then(data => {
            updateProductList(data.products);
            updatePagination(data.currentPage, data.totalPages);
        })
        .catch(error => console.error('Error:', error));
}

function updateProductList(products) {
    const productContainer = document.querySelector(".products");
    productContainer.innerHTML = "";
    
    products.forEach(prod => {
        const productHTML = `
            <div class="singel-product single-product-col">
                <div class="label-pro-new">New</div>
                <div class="carousel-inner">
                    ${prod.productImage.map((image, index) => `
                        <div class="carousel-item ${index === 0 ? 'active' : ''}">
                            <img src="${image}" onclick="window.location.href='/productinfo?id=${prod._id}'" class="d-block w-100" alt="${prod.productName}">
                        </div>
                    `).join('')}
                </div>
                <div class="single-product-content">
                    <h2 class="product-name">
                        <a href="/productinfo?id=${prod._id}">${prod.productName}</a>
                    </h2>
                    <div class="ratings">
                        <div class="rating-box">
                            <div class="rating">
                                ${'<i class="fa fa-star"></i>'.repeat(prod.rating)}
                                ${'<i class="fa fa-star-o"></i>'.repeat(5 - prod.rating)}
                            </div>
                        </div>
                    </div>
                    <div class="product-price">
                        <p>$${prod.salePrice}</p>
                    </div>
                </div>
            </div>
        `;
        productContainer.innerHTML += productHTML;
    });
}

function updatePagination(currentPage, totalPages) {
    const paginationContainer = document.querySelector(".pagination-container");
    let paginationHTML = '';
    
    if (currentPage > 1) {
        paginationHTML += `<a href="#" onclick="changePage(${currentPage - 1})">&laquo; Previous</a>`;
    }
    
    for (let i = 1; i <= totalPages; i++) {
        if (i === currentPage) {
            paginationHTML += `<span class="current-page">${i}</span>`;
        } else {
            paginationHTML += `<a href="#" onclick="changePage(${i})">${i}</a>`;
        }
    }
    
    if (currentPage < totalPages) {
        paginationHTML += `<a href="#" onclick="changePage(${currentPage + 1})">Next &raquo;</a>`;
    }
    
    paginationContainer.innerHTML = paginationHTML;
}

function changePage(page) {
    const categorySelect = document.getElementById('category-select');
    const selectedCategory = categorySelect.value;
    
    fetch(`/api/products?category=${selectedCategory}&page=${page}`)
        .then(response => response.json())
        .then(data => {
            updateProductList(data.products);
            updatePagination(data.currentPage, data.totalPages);
        })
        .catch(error => console.error('Error:', error));
}

// Add event listener to category select
document.getElementById('category-select').addEventListener('change', applyCategory);

</script>


<script>
	function addToCart(productId) {
    const quantity = 1; // Default quantity

    fetch("/cart/add", {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify({ productId, quantity }) // Send product ID and quantity
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            Swal.fire({
                icon: "success",
                title: "Added Successfully!",
                text: "Product has been added to your cart.",
                showConfirmButton: false,
                timer: 1500
            });
        } else {
            Swal.fire({
                icon: "error",
                title: "Failed to Add!",
                text: data.message,
                showConfirmButton: false,
                timer: 1500
            });
        }
    })
    .catch(error => {
        console.error("Error:", error);
        Swal.fire({
            icon: "error",
            title: "Error!",
            text: "Could not connect to the server.",
            showConfirmButton: false,
            timer: 1500
        });
    });
};


	</script>